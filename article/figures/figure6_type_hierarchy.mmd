%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#e8f4f8', 'primaryTextColor': '#1a1a1a', 'primaryBorderColor': '#4a90a4', 'lineColor': '#4a90a4'}}}%%

flowchart TB
    subgraph types["IPFLang Type System"]
        direction TB
        
        τ["τ (Type)"]
        
        Num["Num<br/><i>dimensionless numbers</i>"]
        Bool["Bool<br/><i>true/false values</i>"]
        Sym["Sym<br/><i>LIST choices</i>"]
        Date["Date<br/><i>temporal values</i>"]
        StrList["StrList<br/><i>MULTILIST selections</i>"]
        Amt["Amt[c]<br/><i>currency-parameterized</i>"]
        Alpha["α<br/><i>type variable</i>"]
        
        τ --> Num
        τ --> Bool
        τ --> Sym
        τ --> Date
        τ --> StrList
        τ --> Amt
        τ --> Alpha
    end

    subgraph currencies["Currency Parameter c ∈ ISO 4217"]
        direction LR
        EUR["EUR"]
        USD["USD"]
        GBP["GBP"]
        JPY["JPY"]
        CHF["CHF"]
        dots["... (161 total)"]
        
        EUR --- USD --- GBP --- JPY --- CHF --- dots
    end

    subgraph rules["Key Typing Rules"]
        direction TB
        ADD["<b>T-ADD-AMT</b><br/>Amt[c] + Amt[c] → Amt[c]<br/><i>same currency required</i>"]
        MUL["<b>T-MUL-SCALAR</b><br/>Amt[c] × Num → Amt[c]<br/>Num × Amt[c] → Amt[c]"]
        CONV["<b>T-CONVERT</b><br/>CONVERT(Amt[c₁], c₁, c₂) → Amt[c₂]<br/><i>explicit conversion</i>"]
        ERR["<b>Type Error</b><br/>Amt[EUR] + Amt[USD] → ✗<br/><i>rejected at compile time</i>"]
    end

    Amt --> currencies
    types --> rules

    style types fill:#f8f9fa,stroke:#4a90a4,stroke-width:2px
    style currencies fill:#e8f4f8,stroke:#4a90a4
    style rules fill:#f0f7e6,stroke:#7cb342
    style Amt fill:#fff5e6,stroke:#ffa726,stroke-width:2px
    style ERR fill:#ffebee,stroke:#c62828
